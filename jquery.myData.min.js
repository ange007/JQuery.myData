"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if((typeof exports==="undefined"?"undefined":_typeof(exports))==="object"){module.exports=e(window.Zepto||window.jQuery||window.$||require("jquery"),window,document)}else{e(window.Zepto||window.jQuery||window.$,window,document)}})(function(e,t,n){"use strict";var i="myData";var a=!!t.jQuery;var r=function s(t,n,i){this.bindings=[];this.checkTimer=undefined;this.element=e(t);this.targetObject=n;this.callbacks={};if(typeof i==="function"){this.callbacks.main=i}else if((typeof i==="undefined"?"undefined":_typeof(i))==="object"){this.callbacks.main=i.main;this.callbacks.get=i.get;this.callbacks.set=i.set;this.callbacks.on=i.on}this.bind()};r.prototype={bind:function o(){var t=this;this.element.find("[data-bind]").each(function(n,i){var a=e(i),r=a.attr("data-bind")||"";if(r===""){return}t.bindings.push({element:i,property:r,value:undefined})});this._setEventListeners();this._setCheckTimer()},unbind:function c(){this.element.off("."+i,"[data-bind]");this.element.off("."+i,"[data-on]");clearInterval(this.checkTimer);this.bindings=[]},_setEventListeners:function f(){var t=this;var n=["change","keydown","input","paste"].map(function(e){return e+="."+i});var a=["click","dblclick","change","input","paste","load","unload","select","resize","scroll","submit","error","keydown","keyup","keypress","mouseover","mousedown","mouseup","mousemove","mouseout","mouseenter","mouseleave","blur","focus","focusin","focusout"].map(function(e){return e+="."+i});this.element.on(n.join(" "),"[data-bind]",function(n){var i=e(n.target);var a=i.attr("data-bind");var r=undefined;for(var s in t.bindings){var o=t.bindings[s];if(o.element!==n.target||o.property!==a){continue}r=t._readElementValue(i,o.value);var c="set"+a.charAt(0).toUpperCase()+a.substr(1);if(r!==o.value){o.value=r;if(typeof t.targetObject[c]==="function"){t.targetObject[c].apply(t.targetObject,[r])}else if(typeof t.targetObject[a]==="function"){t.targetObject[a].apply(t.targetObject,[r])}else if(t.targetObject.hasOwnProperty(a)){t.targetObject[a]=r}break}}if(typeof t.callbacks.set==="function"){t.callbacks.set(i,a,r)}else if(typeof t.callbacks.main==="function"){t.callbacks.main("set",i,a,r)}});this.element.on(a.join(" "),"[data-on]",function(n){var i=e(n.target);var a=i.attr("data-on");var r=undefined;var s=a.split(":");var o=s[0].split(",");var c=s[1];var f=/([a-zA-Z0-9,\.\-_\/]+)(?:\(([^)]+)\))?$/.exec(c)||false;if(o.indexOf(n.type)<0){return}if(f){var u=f[1];var l=typeof f[2]!=="string"?[]:f[2].split(",").map(function(e){return e.trim()});if(typeof t.targetObject[u]==="function"){r=t._readElementValue(i,undefined);t.targetObject[u].apply(t.targetObject,l.concat([r]));if(typeof t.callbacks.on==="function"){t.callbacks.on(i,n.type,r)}else if(typeof t.callbacks.main==="function"){t.callbacks.main("on",i,n.type,r)}}}})},_setCheckTimer:function u(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:250;var n=this;this.checkTimer=setInterval(function(){for(var t in n.bindings){var i=n.bindings[t];var a=e(i.element);var r=i.property;var s=i.value;var o="";var c="get"+r.charAt(0).toUpperCase()+r.substr(1);if(typeof n.targetObject[c]==="function"){o=n.targetObject[c]()}else if(typeof n.targetObject[r]==="function"){o=n.targetObject[r]()}else if(n.targetObject.hasOwnProperty(r)){o=n.targetObject[r]}if(o!==s){i.value=o;if(a.is('input[type="checkbox"]')||a.is('input[type="radio"]')){e(a).attr("checked",o)}else if(a.is("select")||a.is("input")||a.is("textarea")){e(a).val(o)}else{e(a).html(o)}if(typeof n.callbacks.get==="function"){n.callbacks.get(a,r,o)}else if(typeof n.callbacks.main==="function"){n.callbacks.main("get",a,r,o)}}}},t)},_readElementValue:function l(t,n){var i=undefined;if(t.is('input[type="checkbox"]')||t.is('input[type="radio"]')){if(typeof n==="boolean"||e(t).attr("value")===undefined){i=e(t).is(":checked")}else{i=e(t).val()}}else if(t.is("select")){if(typeof n==="number"){i=e(t).find(":selected").index()}else{i=e(t).val()}}else if(t.is("input")||t.is("textarea")){i=e(t).val()}else{i=e(t).attr("value")||e(t).html()}return i},destroy:function d(){unbind()}};e.fn[i]=function(t,n){var s=arguments;if(t===undefined||(typeof t==="undefined"?"undefined":_typeof(t))==="object"){this.each(function(){var s=a?e(this).data("_"+i):e(this)[0]["_"+i];if(!s){var o=new r(this,t,n);if(a){e(this).data("_"+i,o)}else{e(this)[0]["_"+i]=o}}});return this}else if(typeof t==="string"&&t[0]!=="_"&&t!=="init"){var o=undefined;this.each(function(){var n=a?e(this).data("_"+i):e(this)[0]["_"+i];if(n instanceof r&&typeof n[t]==="function"){o=n[t].apply(n,Array.prototype.slice.call(s,1))}});return o!==undefined?o:this}}});