<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>JQuery.myData - DEMO</title>
		
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
		<script src="../build/jquery.myData.js"></script>
		
        <style>
			body {
				background-color: rgb(66, 134, 244);
				font-family: "-apple-system",BlinkMacSystemFont,Arial,sans-serif;
				font-size: 14px;
				color: #222;
				line-height: 18px;
			}
            .container {
                margin: 0 auto;
				width: 400px;
            }
			.panel {
				width: 100%;
				padding: 10px;
				border: 1px solid gray;
				border-radius: 10px;
				text-align: center;
				background-color: #f0f8ff;
			}
			code {
				padding: 0 0px 1px;
				border: 1px solid #E1E1E1;
				border-radius: 3px;
				background: #F6F6F6;
				color: #EA0000;
			}
        </style>
	</head>

	<body>
		<div class="container">
			<h3>data-bind</h3>
			
			<div class="panel">
				<label><b>Actual time:</b></label>
				<span data-bind="time"></span>
			</div>

			<br />
			<div class="panel">
				<label><b>Activated "input:text":</b></label>
				<input type="checkbox" data-bind="check"/>
			</div>	

			<br />
			<div class="panel">
				<label><b>Text input test:</b></label> <input id="text-input" type="text" data-bind="text"/>
				<div>You write: "<span id="text-output">*</span>"</div>
			</div>

			<h3>data-on</h3>
			
			<div class="panel">
				<code>data-on="click:test"</code>
				<br /><br />
				<label><b>Show state from "data-on":</b>
				<input type="checkbox" data-on="click:test"/></label> 
			</div>
			
			<br />
			<div class="panel">
				<code>data-on="click:test( 'message' )"</code>
				<br /><br />
				<a href="#" class="button" data-on="click:test( 'message' )">Test</a>
			</div>

			<br />
			<div class="panel">
				<code>data-on="console.warn( 'click' )"</code>
				<br /><br />
				<label><b>Show state from "data-on":</b>
				<input type="checkbox" data-on="console.warn( 'click' )"/></label> 
			</div>

			<br />
			<div class="panel">
				<code>data-on="[ click: console.warn( 'click' ), change: console.warn( 'change' ) ]"</code>
				<br /><br />
				<label><b>Show state from "data-on":</b>
				<input type="checkbox" data-on="[ click: console.warn( 'click' ), change: console.warn( 'change' ) ]"/></label> 
			</div>
		</div>
		
		<script>
			// Time formating
			function n( n )
			{
				return ( n > 9 ? "" + n : "0" + n );
			}

			// Get actual time
			function getTime( )
			{
				const time = new Date( );
				
				return n( time.getHours( ) ) + ':' + n( time.getMinutes( ) ) + ':' + n( time.getSeconds( ) );
			}

			// Uses data
			var data = { 
				'time': getTime( ),
				'text': '',
				'check': false,
				'test': function( msg ) { alert( 'Test alert: ' + msg ); }
			};

			// Activate two-way binding
			$( 'body' ).myData( data, function( type, element, propName, value )
			{
				if( propName === 'text' ) { $( '#text-output' ).html( value ); }
				else if( propName === 'check' ) { $( '#text-input' ).attr( 'disabled', !value ); }
			} );

			// Dynamical time update
			setInterval( function( ) { data.time = getTime( ); }, 1000 );

			// Changed data and checked data-binding
			data.text = 'My text';
		</script>
	</body>
</html>
